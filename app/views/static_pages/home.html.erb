<% provide(:title, 'Home') %>

<div class="center hero-unit">
  <h2>Welcome to Upanishad Database</h2>
  <h3>This is the internal site for volunteers working on <a href="http://www.upanishad.info">Upanishad Info</a></h3>
  <%= link_to "Sign In", '/signin', class: "btn btn-large btn-primary" %>
</div>

<div class="container">
  <h3>Summary</h3>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Num Upanishads</th>
        <th>Num Lines</th>
        <th>Num Translated</th>
        <th>Completed</th>
      </tr>
    </thead>
    <tbody>
    <tr>
        <% total = completed = 0 %>
        <td><%= Upanishad.all.count %></td>
        <td><%= total = Verse.count %></td>
        <td><%= completed = Verse.where("english IS NOT NULL").count %></td>
        <td><%= (completed * 100.0/total).round(2)%>% </td>
      </tr>
    </tbody>
  </table>

  <h3>Detailed Status</h3>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Upanishad Name</th>
        <th>Num Lines</th>
        <th>Num Translated</th>
        <th>Completed</th>
      </tr>
     </thead>
     <tbody>

      <% total = completed = 0 %>
      <% Upanishad.all.each do |upanishad| %>
      <tr>
        <td><%= link_to upanishad.name, upanishad %></td>
        <td><%= total = upanishad.verses.count %></td>
        <td><%= completed = upanishad.verses.where("english IS NOT NULL").count %></td>
        <td><%= total > 0 ? (completed *100.0/total).round(2) : 0.0 %>%</td>
      </tr>
      <% end %>
     </tbody>
    </table>
        

 </div>
</div>


